# JMeter Summariser to InfluxDB Metrics Exporter
Этот проект предназначен для передачи метрик из файлов JMeter Summariser (*.out) в InfluxDB. Программа читает файлы, извлекает метрики и отправляет их в InfluxDB в формате, удобном для анализа и визуализации.

# Основные возможности
Чтение файлов ***.out**, созданных JMeter Summariser.

Извлечение метрик, таких как:

* Среднее время ответа (Avg).
* Минимальное время ответа (Min).
* Максимальное время ответа (Max).
* Количество ошибок (Err).
* Процент ошибок (Err%).
* Активные потоки (Active).
* Запущенные потоки (Started).
* Завершённые потоки (Finished).

Отправка метрик в InfluxDB в двух режимах:

* **Delta** — для промежуточных результатов.
* **Total** — для итоговых результатов.

# Пример работы
## Входные данные (файл sso_auth-1233414.out)

```plaintext
summary +    214 in 00:00:30 =    7.1/s Avg:    18 Min:     0 Max:   593 Err:   105 (49.07%) Active: 17 Started: 17 Finished: 0
summary = 224168 in 08:43:40 =    7.1/s Avg:   104 Min:     0 Max: 519940 Err: 115641 (51.59%)
```

## Выходные данные (InfluxDB)
**Delta** (промежуточные результаты)
```plaintext
delta,project=MyProject,suite=sso_auth avg=18,min=0,max=593,rate=7.1,err=105,errpct=49.07,ath=17,sth=17,eth=0
```
**Total** (итоговые результаты)
```plaintext
total,project=MyProject,suite=sso_auth avg=104,min=0,max=519940,rate=7.1,err=115641,errpct=51.59,ath=0,sth=0,eth=0
```

# Параметры запуска
-debug — включение режима отладки. Выводит дополнительную информацию в консоль.

-hp — использование пакета от HP. Корректно работает в Windows и Linux. Если не использовать, программа работает только в Linux (в Windows возникает блокировка файлов).

-noinf — отключает запись в InfluxDB. Используется для тестирования.

# Пример конфигурации InfluxDB
Убедитесь, что в InfluxDB создан бакет и настроены права доступа. Пример запроса для создания бакета:

```sql
CREATE BUCKET "jmeter_metrics" WITH RETENTION POLICY "30d"
```

# Логика работы
1. Программа читает файлы ***.out** построчно.
2. Для каждой строки, начинающейся с **summary +** или **summary =**, извлекаются метрики.
3. Метрики преобразуются в формат, понятный InfluxDB.
4. Данные отправляются в InfluxDB с использованием протокола Line Protocol.

# Вариант замены
Используйте телеграф для считывания параметров. Пример в **telegaf.conf**
